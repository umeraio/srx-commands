<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRX Operational Commands Guide</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f4f7f6;
        }
        .container {
            background-color: #fff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
        }
        h2 {
            color: #2c3e50;
            border-left: 5px solid #e74c3c;
            padding-left: 15px;
            margin-top: 30px;
        }
        h3 {
            color: #34495e;
            margin-top: 20px;
        }
        .toc {
            background-color: #f9f9f9;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        .toc ul {
            list-style-type: none;
            padding-left: 0;
            column-count: 2;
        }
        .toc a {
            text-decoration: none;
            color: #2980b9;
            font-size: 0.9em;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        .command-block {
            background-color: #2d2d2d;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            color: #eee;
            font-family: 'Courier New', Courier, monospace;
        }
        .mode-label {
            color: #9b59b6;
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
        }
        .cmd {
            color: #ff4d4d; /* Bold Red Command */
            font-weight: bold;
        }
        hr {
            border: 0;
            height: 1px;
            background: #ddd;
            margin: 40px 0;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>SRX Command Reference Guide</h1>

    <div class="toc">
        <h3>TABLE OF CONTENTS</h3>
        <ul>
            <li><a href="#sec1">1. Preparation & Cleanup</a></li>
            <li><a href="#sec2">2. USB Mounting</a></li>
            <li><a href="#sec3">3. Install Firmware from USB</a></li>
            <li><a href="#sec4">4. Copy to Internal Storage</a></li>
            <li><a href="#sec5">5. Install from Internal Storage</a></li>
            <li><a href="#sec6">6. Post-Install Verification</a></li>
            <li><a href="#sec7">7. Bootloader Install / Clean Install</a></li>
            <li><a href="#sec8">8. Repartition / Clean Install</a></li>
            <li><a href="#sec9">9. TFTP Install from Loader</a></li>
            <li><a href="#sec10">10. Mirror Image to Secondary Boot</a></li>
            <li><a href="#sec11">11. Bootloader U-Boot / Veloader Upgrade</a></li>
            <li><a href="#sec12">12. Backup Config to USB</a></li>
            <li><a href="#sec13">13. SRX345 Initial Config</a></li>
            <li><a href="#sec14">14. Software Upgrade from TFTP</a></li>
            <li><a href="#sec15">15. Post-Upgrade Verification</a></li>
            <li><a href="#sec16">16. Common Alarms & Fixes</a></li>
            <li><a href="#sec17">17. Additional Verification Commands</a></li>
            <li><a href="#sec18">18. Additional Storage Commands</a></li>
            <li><a href="#sec19">19. Additional Backup & Restore</a></li>
            <li><a href="#sec20">20. Additional Debug / Logs</a></li>
            <li><a href="#sec21">21. Additional Interface / Routing</a></li>
        </ul>
    </div>

    <h2 id="sec1">1) PRE-UPGRADE PREPARATION</h2>
    <h3>1.1 Verify Current Firmware / Boot Version</h3>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show system firmware</span>
    </div>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show version</span>
    </div>

    <h3>1.2 System Cleanup</h3>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">request system storage cleanup</span>
    </div>

    <h3>1.3 Reboot System</h3>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">request system reboot</span>
    </div>

    <h2 id="sec2">2) USB PREPARATION & MOUNTING</h2>
    <h3>2.1 Enter CLI</h3>
    <div class="command-block"><span class="mode-label">Mode: Operational (>)</span><span class="cmd">cli</span></div>
    
    <h3>2.2 Enter Shell Mode</h3>
    <div class="command-block"><span class="mode-label">Mode: CLI (>)</span><span class="cmd">start shell</span></div>

    <h3>2.3 Create Mount Point</h3>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">mkdir /var/tmp/usb</span></div>

    <h3>2.4 Mount USB</h3>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">mount -t msdosfs /dev/da1s1 /var/tmp/usb</span></div>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">mount -t msdosfs /dev/da1 /mnt</span></div>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">mount -t ext2fs /dev/da1s1 /var/tmp/usb</span></div>

    <h3>2.5 Confirm USB Files</h3>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">ls /var/tmp/usb</span></div>

    <h2 id="sec3">3) INSTALL FIRMWARE FROM USB</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">request system software add /mnt/junos-install-srxsme-mips-64-24.4R2.21.tgz no-validate reboot</span><br>
        <span class="cmd">request system software add /var/tmp/usb/junos.tgz no-validate reboot</span><br>
        <span class="cmd">request system software add /var/tmp/usb/junos-install-srxsme-mips-64-25.2R1.9.tgz partition no-validate reboot</span><br>
        <span class="cmd">request system software add /var/tmp/jfirmware-srxsme-23.4R2.13-signed.tgz partition no-validate reboot</span>
    </div>

    <h2 id="sec4">4) COPY IMAGE FROM USB TO INTERNAL STORAGE</h2>
    <h3>4.1 Copy Image</h3>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">cp /cf/var/tmp/usb/junos.img /var/tmp/</span></div>
    
    <h3>4.2 Verify Copy</h3>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">ls -lh /var/tmp/junos.img</span></div>

    <h3>4.3 Unmount USB</h3>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">umount /cf/var/tmp/usb</span></div>

    <h2 id="sec5">5) INSTALL JUNOS FROM INTERNAL STORAGE</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">request system software add /var/tmp/junos.img no-validate reboot</span>
    </div>
    <h3>5.1 Delete Image</h3>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">rm /var/tmp/junos.img</span></div>

    <h2 id="sec6">6) POST-REBOOT VERIFICATION</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show version</span><br>
        <span class="cmd">show system uptime</span><br>
        <span class="cmd">show system alarms</span><br>
        <span class="cmd">show chassis hardware</span><br>
        <span class="cmd">show interfaces terse</span>
    </div>

    <h2 id="sec7">7) BOOTLOADER INSTALL / CLEAN INSTALL</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Bootloader (loader>)</span>
        <span class="cmd">install --format file:///jfirmware-srxsme-mips-64-25.2R1.9.tgz</span><br>
        <span class="cmd">install file:///junos-install-srxsme-mips-64-25.2R1.9.tgz</span>
    </div>

    <h2 id="sec8">8) REPARTITION / CLEAN INSTALL</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">request system software add /var/tmp/usb/junos-install-srxsme-mips-64-25.2R1.9.tgz partition no-validate reboot</span>
    </div>

    <h2 id="sec9">9) TFTP INSTALL FROM LOADER</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Bootloader (loader>)</span>
        <span class="cmd">set ipaddr=192.168.1.20</span><br>
        <span class="cmd">set netmask=255.255.255.0</span><br>
        <span class="cmd">set serverip=192.168.1.10</span><br>
        <span class="cmd">install tftp://192.168.1.10/junos-install-srxsme-mips-64-25.2R1.9.tgz</span>
    </div>

    <h2 id="sec10">10) MIRROR IMAGE TO SECONDARY BOOT</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">request system snapshot media internal slice alternate</span>
    </div>

    <h2 id="sec11">11) BOOTLOADER U-BOOT / VELOADER UPGRADE</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Shell (%)</span>
        <span class="cmd">bootupgrade -u /boot/uboot</span><br>
        <span class="cmd">bootupgrade -l /boot/veloader -x</span>
    </div>
    <h3>11.1 Verify CRC</h3>
    <div class="command-block"><span class="mode-label">Mode: Shell (%)</span><span class="cmd">bootupgrade -c u-boot</span></div>

    <h2 id="sec12">12) BACKUP CONFIG TO USB (RESCUE CONFIG)</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">request system configuration rescue save</span>
    </div>
    <h3>12.2 Save Configuration</h3>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show configuration | save /var/tmp/usb/msqsrx-usb.conf</span>
    </div>

    <h2 id="sec13">13) SRX345 INITIAL CONFIG</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Configuration (#)</span>
        <span class="cmd">set system root-authentication plain-text-password</span><br>
        <span class="cmd">set system host-name srx</span><br>
        <span class="cmd">set system services ssh</span><br>
        <span class="cmd">set interfaces fxp0 unit 0 family inet address 192.168.0.178/24</span><br>
        <span class="cmd">commit</span>
    </div>

    <h2 id="sec14">14) SOFTWARE UPGRADE FROM TFTP</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Shell (%)</span>
        <span class="cmd">scp carlos@192.168.0.102:/var/lib/tftpboot/junos-srxsme-21.2R1.10.tgz /var/tmp/</span>
    </div>

    <h2 id="sec15">15) POST-UPGRADE VERIFICATION</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show system information</span><br>
        <span class="cmd">show chassis hardware detail</span><br>
        <span class="cmd">show chassis environment</span><br>
        <span class="cmd">show system license</span>
    </div>

    <h2 id="sec16">16) COMMON ALARMS & FIXES</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">request system auto recovery state save</span><br>
        <span class="cmd">request system configuration rescue save</span>
    </div>

    <h2 id="sec17">17) ADDITIONAL VERIFICATION / TROUBLESHOOTING</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show system processes</span><br>
        <span class="cmd">show system statistics</span><br>
        <span class="cmd">show system alarms detail</span>
    </div>

    <h2 id="sec18">18) ADDITIONAL STORAGE / PARTITION COMMANDS</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show system storage</span><br>
        <span class="cmd">show system filesystems</span><br>
        <span class="mode-label">Mode: Shell (%)</span>
        <span class="cmd">df -h</span>
    </div>

    <h2 id="sec19">19) ADDITIONAL BACKUP & RESTORE COMMANDS</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show configuration | save /var/tmp/backup.conf</span><br>
        <span class="cmd">load override /var/tmp/backup.conf</span>
    </div>

    <h2 id="sec20">20) ADDITIONAL DEBUG / LOGS COMMANDS</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show log messages | match ERROR</span><br>
        <span class="cmd">show log chassisd | last 20</span><br>
        <span class="cmd">show log interactive-commands | last 20</span>
    </div>

    <h2 id="sec21">21) ADDITIONAL INTERFACE / ROUTING COMMANDS</h2>
    <div class="command-block">
        <span class="mode-label">Mode: Operational (>)</span>
        <span class="cmd">show interfaces extensive</span><br>
        <span class="cmd">show route summary</span><br>
        <span class="cmd">show security zones</span><br>
        <span class="cmd">show security flow session</span>
    </div>

    <hr>
    <h2 id="end">22) END OF DOCUMENT</h2>
</div>

</body>
</html>